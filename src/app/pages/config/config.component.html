<div class="config-container" (keydown.enter)="onEnterKey()">
  <!-- Header -->
  <div class="config-header">
    <h1>Configurações</h1>
    <p>Configure seu salário, dias importantes e categorias de gastos</p>
  </div>

  <!-- Formulário Principal -->
  <app-config-form
    [settings]="settings"
    (formChange)="onConfigFormChange($event)">
  </app-config-form>

  <!-- Gerenciamento de Categorias -->
  <app-categories-manager
    [categories]="categories"
    (categoriesChange)="onCategoriesChange($event)">
  </app-categories-manager>

  <!-- Ações Finais -->
  <div class="config-actions">
    <button 
      mat-stroked-button 
      (click)="resetConfig()"
      [disabled]="!hasChanges || loading">
      <mat-icon>restore</mat-icon>
      Restaurar
    </button>
    
    <button 
      mat-stroked-button 
      (click)="exportData()"
      [disabled]="loading">
      <mat-icon>download</mat-icon>
      Exportar
    </button>
    
    <button 
      mat-stroked-button 
      (click)="importData()"
      [disabled]="loading">
      <mat-icon>upload</mat-icon>
      Importar
    </button>
    
    <button 
      mat-raised-button 
      color="primary" 
      (click)="saveConfig()"
      [disabled]="loading">
      <mat-icon *ngIf="!loading">save</mat-icon>
      <mat-icon *ngIf="loading" class="spinning">refresh</mat-icon>
      {{ loading ? 'Salvando...' : 'Salvar Configurações' }}
    </button>
  </div>

  <!-- Input oculto para importar arquivo -->
  <input 
    #fileInput 
    type="file" 
    accept=".json" 
    (change)="onFileSelected($event)" 
    style="display: none">

  <!-- Indicador de Mudanças -->
  <div *ngIf="hasChanges" class="changes-indicator">
    <mat-icon>edit</mat-icon>
    <span>Você tem alterações não salvas</span>
  </div>

  <!-- Footer -->
  <app-footer></app-footer>
</div>
